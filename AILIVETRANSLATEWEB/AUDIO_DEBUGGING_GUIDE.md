# ุฏููู ุชุดุฎูุต ูุดููุฉ ุงูุชูุฑูุบ ุงูุตูุชู (Audio Transcription Debugging Guide)

## ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ

### 1. ุชุญุณูู Logging ูู LiveTranslation.tsx
- โ ุฅุถุงูุฉ ุชุญููู ููุตู ูุญุงูุฉ ุงูุงุชุตุงู ูุจู ุฅุฑุณุงู ุงูุตูุช
- โ ุฅุถุงูุฉ ุชูุงุตูู ุฃูุซุฑ ุนู ุณุจุจ ุฑูุถ ุฅุฑุณุงู audio chunks
- โ ุฅุถุงูุฉ try/catch ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุนูุฏ ุฅุฑุณุงู ุงูุตูุช

### 2. ุชุญุณูู Logging ูู renderWebSocketService.ts
- โ ุฅุถุงูุฉ ุชุญููู ููุตู ูุฃุณุจุงุจ ุฑูุถ audio chunks
- โ ุฅุถุงูุฉ logging ููุตู ูู sendAudioData method
- โ ุฅุถุงูุฉ logging ููุตู ูู sendMessage method
- โ ุฅุถุงูุฉ ุชุชุจุน ุฃูุถู ูุฑุณุงุฆู ุงูุฎุงุฏู ุงููุงุฑุฏุฉ

### 3. ุชุญุณูู audioConverter.ts
- โ ุฅุถุงูุฉ logging ููุตู ูุงุฎุชุจุงุฑ ุฏุนู ุชูุณููุงุช ุงูุตูุช
- โ ุฅุถุงูุฉ ุชุดุฎูุต ูุชูุณููุงุช ุงูุตูุช ุงููุฏุนููุฉ

## ุฎุทูุงุช ุงูุชุดุฎูุต

### ุงูุฎุทูุฉ 1: ูุญุต Console Logs ุงูุฌุฏูุฏุฉ

ุจุนุฏ ุชุทุจูู ุงูุชุญุฏูุซุงุชุ ุงุจุญุซ ุนู ูุฐู ุงูุฑุณุงุฆู ูู console:

1. **ุชุญููู ุญุงูุฉ ุงูุงุชุตุงู:**
```
๐ Detailed status check before sending audio: {
  serviceExists: true/false,
  isConnectedToWS: true/false,
  recordingState: true/false,
  chunkSize: [number],
  chunkType: "[audio format]"
}
```

2. **ุชุญููู ุฃุณุจุงุจ ุฑูุถ ุงูุตูุช:**
```
โ๏ธ Cannot send audio chunk - Reasons: [array of reasons]
```

3. **ุชูุงุตูู ุฅุฑุณุงู ุงูุตูุช:**
```
โ All checks passed, proceeding to send audio chunk
๐ค sendAudioData called with chunk: [size] bytes
๐ Starting FileReader process for base64 conversion...
โ FileReader onload triggered
โ Audio message sent successfully via WebSocket
```

### ุงูุฎุทูุฉ 2: ุงูุชุญูู ูู ุฃุณุจุงุจ ุงููุดููุฉ ุงูุดุงุฆุนุฉ

#### ุงูุณุจุจ ุงููุญุชูู 1: isStreaming = false
ุฅุฐุง ุฑุฃูุช `isStreaming = false` ูู logs:
- ุชุญูู ูู ุงุณุชุฏุนุงุก `stopStreaming()` ุจุฏูู ูุตุฏ
- ุชุญูู ูู `disconnect()` method

#### ุงูุณุจุจ ุงููุญุชูู 2: WebSocket ุบูุฑ ูุชุตู
ุฅุฐุง ุฑุฃูุช `isConnected = false` ุฃู `WebSocket not ready`:
- ุชุญูู ูู ุญุงูุฉ ุงุชุตุงู ุงูุฎุงุฏู
- ุชุญูู ูู ุฑุณุงุฆู ุงูุฎุทุฃ ูู WebSocket

#### ุงูุณุจุจ ุงููุญุชูู 3: Service ุบูุฑ ููุฌูุฏ
ุฅุฐุง ุฑุฃูุช `serviceExists = false`:
- ุชุญูู ูู ุชููุฆุฉ `renderWebSocketServiceRef`
- ุชุญูู ูู `initializeRenderWebSocketService()`

### ุงูุฎุทูุฉ 3: ูุญุต ุฑุณุงุฆู ุงูุฎุงุฏู

ุงุจุญุซ ุนู ูุฐู ุงูุฑุณุงุฆู:

```
๐จ WebSocket message received: {
  type: "[message type]",
  hasText: true/false,
  hasMessage: true/false
}
```

ุฅุฐุง ูู ุชุธูุฑ ุฑุณุงุฆู ูู ุงูุฎุงุฏูุ ูุงููุดููุฉ ูู:
1. ุงูุฎุงุฏู ูุง ูุณุชูุจู ุงูุตูุช
2. ุงูุฎุงุฏู ูุง ูุณุชุทูุน ูุนุงูุฌุฉ ุงูุตูุช
3. ูุดููุฉ ูู ุงุชุตุงู WebSocket

### ุงูุฎุทูุฉ 4: ูุญุต ุชูุณูู ุงูุตูุช

ุงุจุญุซ ุนู:
```
๐ Testing audio format support...
๐ต Format [format]: โ Supported / โ Not supported
๐ต Selected audio format: [selected format]
```

## ุงูุฎุทูุงุช ุงูุชุงููุฉ ููุชุดุฎูุต

### 1. ุงุฎุชุจุฑ ูุน Console ููุชูุญ
```bash
# ุงูุชุญ ุงููุชุตูุญ ูุน console ููุชูุญ
# ุงุจุฏุฃ ุงูุชุณุฌูู
# ุฑุงูุจ ุงูุฑุณุงุฆู ุงูุชุงููุฉ ุจุงูุชุฑุชูุจ:
```

### 2. ูุณุฎ ูุฅุฑุณุงู ูุฐู ุงููุนูููุงุช:

**ุฃ) ุญุงูุฉ ุงูุงุชุตุงู:**
```
๐ Detailed status check before sending audio: {...}
```

**ุจ) ุญุงูุฉ ุฅุฑุณุงู ุงูุตูุช:**
```
๐ค sendAudioData called with chunk: ...
```

**ุฌ) ุฑุณุงุฆู ุงูุฎุงุฏู (ุฅู ูุฌุฏุช):**
```
๐จ WebSocket message received: {...}
```

**ุฏ) ุฃู ุฑุณุงุฆู ุฎุทุฃ:**
```
โ Error [description]
โ๏ธ [warning description]
```

### 3. ุชุญูู ูู ุญุงูุฉ WebSocket
```javascript
// ูู console ุงููุชุตูุญุ ุงูุชุจ:
console.log('WebSocket State:', window.renderWebSocketService?.ws?.readyState);
// ูุฌุจ ุฃู ูููู 1 (OPEN)
```

## ูุดุงูู ูุญุชููุฉ ูุญููููุง

### ุงููุดููุฉ: "Service not exists"
**ุงูุญู:** ุชุญูู ูู ุชููุฆุฉ ุงูุฎุฏูุฉ ูู `initializeRenderWebSocketService()`

### ุงููุดููุฉ: "WebSocket not connected"
**ุงูุญู:** ุชุญูู ูู ุงุชุตุงู ุงูุฎุงุฏู ูุงุนุฏ ุงููุญุงููุฉ

### ุงููุดููุฉ: "Recording stopped"
**ุงูุญู:** ุชุญูู ูู `isRecording` state ูุชุฃูุฏ ูู ุนุฏู ุฅููุงู ุงูุชุณุฌูู

### ุงููุดููุฉ: ูุง ุชูุฌุฏ ุฑุณุงุฆู ูู ุงูุฎุงุฏู
**ุงูุญู:** 
1. ุชุญูู ูู ุฃู ุงูุฎุงุฏู ูุนูู
2. ุชุญูู ูู ุนููุงู WebSocket
3. ุชุญูู ูู ุชูุณูู ุงูุตูุช ุงููุฑุณู

---

## ุฃุฑุณู ูุฐู ุงููุนูููุงุช ุนูุฏ ุทูุจ ุงููุณุงุนุฏุฉ:

1. **Console logs** ููุฎุทูุงุช ุงููุฐููุฑุฉ ุฃุนูุงู
2. **ุชูุณูู ุงูุตูุช** ุงูููุชุดู
3. **ุญุงูุฉ WebSocket** 
4. **ุฃู ุฑุณุงุฆู ุฎุทุฃ** ุชุธูุฑ
5. **ููุน ุงููุชุตูุญ** ูุงูุฅุตุฏุงุฑ

ูุฐุง ุณูุณุงุนุฏ ูู ุชุญุฏูุฏ ุงูุณุจุจ ุงูุฏููู ูุชูููุฑ ุงูุญู ุงูููุงุณุจ. 