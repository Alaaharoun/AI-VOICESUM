# ๐ง Server Connection Diagnostic Guide

## ุงููุดููุฉ
ุงูุชุทุจูู ูุนูู ุจุดูู ุตุญูุญ ูู ุฌุงูุจ ุงูุนูููุ ููู ูุง ุชุธูุฑ ุฃู ุณุฌูุงุช ูู ุงูุณูุฑูุฑ ููุฃููุง ูุง ูุฑุณู ุฃู ุจูุงูุงุช ุตูุชูุฉ ูุนูููุง.

## ุงูุฃุฏูุงุช ุงููุชุงุญุฉ ููุชุดุฎูุต

### 1. ุฃุฏุงุฉ ุงูุชุดุฎูุต ุงูุชูุงุนููุฉ
```
test-server-connection.html
```
- ุงุฎุชุจุงุฑ ุตุญุฉ ุงูุณูุฑูุฑ
- ุงุฎุชุจุงุฑ ุงุชุตุงู WebSocket
- ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุงูุจูุงูุงุช ุงูุตูุชูุฉ
- ุณุฌูุงุช ููุฑูุฉ ููุตูุฉ

### 2. ุงูุณูุฑูุฑ ุงููุญุณู
```
deploy-improved-server.js
```
- ุณุฌูุงุช ููุตูุฉ ูุฌููุน ุงูุฑุณุงุฆู
- ูุนูููุงุช ุชูุตูููุฉ ุนู ุงูุจูุงูุงุช ุงูุตูุชูุฉ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุน ุชูุงุตูู ูุงููุฉ

## ุฎุทูุงุช ุงูุชุดุฎูุต

### ุงูุฎุทูุฉ 1: ุชุดุบูู ุงูุณูุฑูุฑ ุงููุญุณู
```bash
cd AILIVETRANSLATEWEB
node deploy-improved-server.js
```

### ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
1. ุงูุชุญ `test-server-connection.html` ูู ุงููุชุตูุญ
2. ุงุถุบุท ุนูู "Test Health Check"
3. ุงุถุบุท ุนูู "Test WebSocket"
4. ุงุถุบุท ุนูู "Send Test Audio"

### ุงูุฎุทูุฉ 3: ูุฑุงูุจุฉ ุงูุณุฌูุงุช
ุฑุงูุจ ุณุฌูุงุช ุงูุณูุฑูุฑ ููุญุตูู ุนูู:
- `[WebSocket] ๐ฅ Received message from client`
- `[WebSocket] ๐ต Processing audio message...`
- `[WebSocket] ๐ค Writing audio buffer to Azure push stream...`

## ุงููุดุงูู ุงููุญุชููุฉ ูุงูุญููู

### ุงููุดููุฉ 1: ูุง ุชุธูุฑ ุณุฌูุงุช ุงูุงุชุตุงู
**ุงูุฃุนุฑุงุถ:** ูุง ุชุธูุฑ ุฑุณุงุฆู `[WebSocket] ๐ New client connected`

**ุงูุญููู:**
- ุชุฃูุฏ ูู ุฃู ุงูุณูุฑูุฑ ูุนูู ุนูู ุงููููุฐ ุงูุตุญูุญ
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช CORS
- ุชุฃูุฏ ูู ุฃู WebSocket endpoint ุตุญูุญ

### ุงููุดููุฉ 2: ูุง ุชุธูุฑ ุณุฌูุงุช ุงูุฑุณุงุฆู
**ุงูุฃุนุฑุงุถ:** ูุง ุชุธูุฑ ุฑุณุงุฆู `[WebSocket] ๐ฅ Received message from client`

**ุงูุญููู:**
- ุชุญูู ูู ุฃู ุงูุนููู ูุฑุณู ุงูุฑุณุงุฆู ุจุงูุดูู ุงูุตุญูุญ
- ุชุฃูุฏ ูู ุฃู WebSocket connection ููุชูุญ
- ุชุญูู ูู ุชูุณูู ุงูุฑุณุงุฆู

### ุงููุดููุฉ 3: ูุง ุชุธูุฑ ุณุฌูุงุช ุงูุจูุงูุงุช ุงูุตูุชูุฉ
**ุงูุฃุนุฑุงุถ:** ูุง ุชุธูุฑ ุฑุณุงุฆู `[WebSocket] ๐ต Processing audio message...`

**ุงูุญููู:**
- ุชุญูู ูู ุฃู ุงูุนููู ูุฑุณู ุฑุณุงุฆู `audio` type
- ุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูุดูุฑุฉ ุจู base64
- ุชุญูู ูู ุญุฌู ุงูุจูุงูุงุช ุงูุตูุชูุฉ

### ุงููุดููุฉ 4: ูุง ุชุธูุฑ ุณุฌูุงุช Azure
**ุงูุฃุนุฑุงุถ:** ูุง ุชุธูุฑ ุฑุณุงุฆู `[Azure Speech] ๐ Partial result`

**ุงูุญููู:**
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช Azure Speech Service
- ุชุฃูุฏ ูู ุฃู ุงูููุงุชูุญ ุตุญูุญุฉ
- ุชุญูู ูู ุชูุณูู ุงูุจูุงูุงุช ุงูุตูุชูุฉ

## ูุนูููุงุช ุฅุถุงููุฉ ููุชุดุฎูุต

### ุณุฌูุงุช ุงูุนููู ุงููุชููุนุฉ
```
๐ค Sent message: {type: 'init', ...}
๐ค Sent message: {type: 'audio', data: '...', format: 'audio/pcm'}
๐ค Sent raw audio chunk (base64): 32768 bytes, format: audio/pcm
```

### ุณุฌูุงุช ุงูุณูุฑูุฑ ุงููุชููุนุฉ
```
[WebSocket] ๐ New client connected
[WebSocket] ๐ฅ Received message from client
[WebSocket] ๐ Parsed JSON message: init
[WebSocket] ๐ต Processing audio message...
[WebSocket] ๐ค Writing audio buffer to Azure push stream...
[Azure Speech] ๐ Partial result: "..."
```

### ุงุฎุชุจุงุฑ ุณุฑูุน
```javascript
// ูู console ุงููุชุตูุญ
const ws = new WebSocket('wss://ai-voicesum.onrender.com/ws');
ws.onopen = () => {
  ws.send(JSON.stringify({
    type: 'init',
    language: 'auto',
    targetLanguage: 'en'
  }));
};
```

## ุงูุงุชุตุงู ุจุงูุฏุนู
ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ูุฑุฌู ุชูุฏูู:
1. ุณุฌูุงุช ุงูุณูุฑูุฑ ุงููุงููุฉ
2. ุณุฌูุงุช console ุงููุชุตูุญ
3. ูุชุงุฆุฌ ุงุฎุชุจุงุฑ `test-server-connection.html`
4. ููุทุฉ ุดุงุดุฉ ูู ูุงุฌูุฉ ุงูุชุทุจูู 