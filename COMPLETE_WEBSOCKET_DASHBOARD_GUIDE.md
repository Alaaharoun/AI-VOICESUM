# دليل لوحة تحكم اختبارات Render WebSocket الشاملة

## 🎯 **نظرة عامة**

تم إنشاء واجهة شاملة تجمع جميع اختبارات Render WebSocket في مكان واحد، مما يسهل تشخيص المشاكل واختبار جميع المكونات.

## 🚀 **كيفية الاستخدام**

### 1. **فتح الواجهة**
```bash
# افتح الملف في المتصفح
start test-complete-websocket-dashboard.html
```

أو افتح الملف مباشرة في المتصفح:
`file:///C:/LiveTranslateproject/test-complete-websocket-dashboard.html`

### 2. **التنقل بين الأقسام**

الواجهة مقسمة إلى 4 أقسام رئيسية:

#### 🔌 **اختبارات الاتصال**
- اختبار HTTP Health
- اختبار WebSocket Connection
- اختبار Ping/Pong
- اختبار شامل للاتصال

#### 🎤 **اختبارات الصوت**
- اختبار الميكروفون
- اختبار إرسال الصوت
- اختبار التفريغ
- مراقبة مستوى الصوت
- إحصائيات الصوت

#### 🧪 **اختبارات شاملة**
- اختبار شامل كامل
- اختبار خطوة بخطوة
- اختبار الضغط
- اختيار اللغة

#### 🔍 **تشخيص المشاكل**
- تشخيص شامل
- فحص صحة السيرفر
- فحص Azure Speech
- اختبار تنسيقات الصوت

## 📊 **تفسير النتائج**

### ✅ **النتائج الإيجابية**
```
HTTP Health: PASS
WebSocket Connection: PASS
Ping/Pong: PASS
Microphone: PASS
Audio Sending: PASS
Transcription: PASS
```

### ❌ **النتائج السلبية**
```
HTTP Health: FAIL
WebSocket Connection: FAIL
Ping/Pong: FAIL
Microphone: FAIL
Audio Sending: FAIL
Transcription: FAIL
```

## 🛠️ **الاختبارات المتاحة**

### 1. **اختبارات الاتصال الأساسية**

#### اختبار HTTP Health
- يفحص استجابة السيرفر على Render
- يتحقق من وجود Azure Speech API Key
- يتحقق من حالة السيرفر

#### اختبار WebSocket
- يختبر الاتصال بـ WebSocket
- يرسل رسالة تهيئة (init)
- يرسل بيانات صوتية تجريبية
- يراقب الاستجابات

#### اختبار Ping/Pong
- يختبر استجابة السيرفر لرسائل Ping
- يتحقق من الاتصال ثنائي الاتجاه

### 2. **اختبارات الصوت**

#### اختبار الميكروفون
- يطلب إذن الوصول للميكروفون
- يختبر جودة الصوت
- يعرض مستوى الصوت في الوقت الفعلي

#### اختبار إرسال الصوت
- يسجل الصوت من الميكروفون
- يرسل البيانات إلى السيرفر
- يراقب وقت الاستجابة

#### اختبار التفريغ
- يراقب استقبال التفريغ من السيرفر
- يتحقق من جودة التفريغ
- يعرض النتائج

### 3. **اختبارات شاملة**

#### اختبار شامل كامل
- يجري جميع الاختبارات بالترتيب
- يعرض تقرير مفصل
- يحدد المشاكل بدقة

#### اختبار خطوة بخطوة
- يجري الاختبارات تدريجياً
- يسمح بمراقبة كل خطوة
- مفيد للتشخيص

### 4. **تشخيص المشاكل**

#### تشخيص شامل
- يجري فحص شامل للنظام
- يحدد نقاط الضعف
- يقترح حلول

## 📈 **الإحصائيات المتاحة**

### إحصائيات الصوت
- **القطع المرسلة:** عدد قطع الصوت المرسلة
- **إجمالي البيانات:** حجم البيانات المرسلة
- **الردود المستلمة:** عدد الردود من السيرفر
- **وقت الاستجابة:** متوسط وقت الاستجابة

### إحصائيات الاتصال
- **Messages Received:** عدد الرسائل المستلمة
- **Connection Status:** حالة الاتصال
- **Response Time:** وقت الاستجابة

## 🔧 **استكشاف الأخطاء**

### مشاكل شائعة وحلولها

#### 1. **مشكلة في HTTP Health**
```
❌ HTTP Health: FAIL
```
**الحل:**
- تحقق من حالة السيرفر على Render
- تحقق من متغيرات البيئة
- راجع سجلات Render

#### 2. **مشكلة في WebSocket**
```
❌ WebSocket Connection: FAIL
```
**الحل:**
- تحقق من عنوان WebSocket
- تحقق من إعدادات CORS
- راجع كود السيرفر

#### 3. **مشكلة في الميكروفون**
```
❌ Microphone: FAIL
```
**الحل:**
- تأكد من إعطاء إذن الميكروفون
- تحقق من إعدادات المتصفح
- جرب متصفح آخر

#### 4. **مشكلة في التفريغ**
```
❌ Transcription: FAIL
```
**الحل:**
- تحقق من Azure Speech Service
- تحقق من إعدادات اللغة
- راجع كود معالجة الصوت

## 📝 **السجلات والتصدير**

### عرض السجلات
- جميع الاختبارات تسجل في قسم السجلات
- السجلات محدثة في الوقت الفعلي
- يمكن تصفية السجلات حسب النوع

### تصدير السجلات
- اضغط على "تصدير السجلات"
- سيتم تحميل ملف نصي يحتوي على جميع السجلات
- مفيد للمراجعة أو الدعم الفني

## 🎯 **أفضل الممارسات**

### 1. **ترتيب الاختبارات**
1. ابدأ باختبار HTTP Health
2. ثم اختبار WebSocket
3. ثم اختبار الميكروفون
4. ثم اختبار إرسال الصوت
5. وأخيراً اختبار التفريغ

### 2. **التشخيص**
- استخدم "تشخيص شامل" للكشف عن المشاكل
- راجع السجلات بعناية
- استخدم "اختبار خطوة بخطوة" للتشخيص الدقيق

### 3. **المراقبة**
- راقب مستوى الصوت أثناء الاختبار
- تحقق من الإحصائيات
- راقب وقت الاستجابة

## 🔗 **الملفات المرتبطة**

### ملفات الاختبار
- `test-complete-websocket-dashboard.html` - الواجهة الرئيسية
- `test-complete-audio-websocket.html` - اختبار الصوت من المتصفح
- `test-complete-audio-websocket.js` - اختبار الصوت بـ Node.js

### ملفات التشخيص
- `test-audio-transcription-debug.js` - تشخيص مشاكل التفريغ
- `test-server-audio-processing.js` - فحص معالجة الصوت
- `test-direct-server-debug.js` - تشخيص مباشر للسيرفر

### ملفات المراقبة
- `monitor-render-connection.js` - مراقبة مستمرة
- `quick-render-status-check.js` - فحص سريع

## 📞 **الدعم**

### إذا واجهت مشاكل:
1. **راجع السجلات** - ابحث عن رسائل الخطأ
2. **اختبر خطوة بخطوة** - لتحديد المشكلة بدقة
3. **راجع الإعدادات** - تحقق من متغيرات البيئة
4. **تصدير السجلات** - للمراجعة أو الدعم الفني

### معلومات مفيدة:
- **عنوان السيرفر:** `wss://ai-voicesum.onrender.com/ws`
- **عنوان HTTP:** `https://ai-voicesum.onrender.com/health`
- **اللغة الافتراضية:** العربية (السعودية)

---

**آخر تحديث:** 31 يوليو 2025
**الإصدار:** 2.0.0
**الحالة:** جاهز للاستخدام 