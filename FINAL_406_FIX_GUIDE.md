# ๐จ ุฅุตูุงุญ ููุงุฆู ูุฎุทุฃ 406 (Not Acceptable)

## ๐ ุงููุดููุฉ ุงูุญุงููุฉ
```
GET https://knghoytnlpcjcyiiyjax.supabase.co/rest/v1/user_subscriptions?select=... 406 (Not Acceptable)
```

## โก ุงูุญู ุงูุทุงุฑุฆ (3 ุฎุทูุงุช)

### ุงูุฎุทูุฉ 1: ุชุทุจูู ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช
1. ุงุฐูุจ ุฅูู [Supabase Dashboard](https://supabase.com/dashboard)
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงุฐูุจ ุฅูู **SQL Editor**
4. ุงูุณุฎ ูุญุชูู ููู `fix_subscription_table_emergency.sql`
5. ุงูุตู ุงูููุฏ ูุงุถุบุท **Run**
6. ุงูุชุธุฑ ุญุชู ุชุธูุฑ ุงูุฑุณุงูุฉ: `Emergency database fix completed successfully!`

### ุงูุฎุทูุฉ 2: ุชุดุบูู ุงูุฅุตูุงุญ ุงูุชููุงุฆู
```bash
# ุนูู Windows
emergency-web-fix.bat
```

### ุงูุฎุทูุฉ 3: ุงูุชุญูู ูู ุงูุฅุตูุงุญ
```bash
# ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู
npx expo start --clear --web

# ูุชุญ ุงููุชุตูุญ ุนูู
http://localhost:8081
```

## ๐ง ูุง ููุนูู ุงูุฅุตูุงุญ ุงูุทุงุฑุฆ

### 1. ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- โ ุญุฐู ูุฅุนุงุฏุฉ ุฅูุดุงุก ุฌุฏูู `user_subscriptions`
- โ ุฅูุดุงุก ุณูุงุณุงุช ุฃูููุฉ ุจุณูุทุฉ ููุนุงูุฉ
- โ ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูููุณุชุฎุฏู ุงูุญุงูู
- โ ุฅุตูุงุญ ุฌููุน ุงูุนูุงูุงุช ูุงููููุฏ

### 2. ุฅุตูุงุญ ุงูููุฏ:
- โ ุชุญุณูู headers ุงูุทูุจุงุช
- โ ุชุบููุฑ `.single()` ุฅูู `.maybeSingle()`
- โ ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก

### 3. ุฅุตูุงุญ ุงูุงุชุตุงู:
- โ ุชุญุณูู ุฅุนุฏุงุฏุงุช Supabase client
- โ ุฅุถุงูุฉ headers ููุงุณุจุฉ
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก

## ๐ ุงูุชุญูู ูู ุงูุฅุตูุงุญ

### 1. ูู Supabase Dashboard:
- ุงุฐูุจ ุฅูู **Table Editor**
- ุชุฃูุฏ ูู ูุฌูุฏ ุฌุฏูู `user_subscriptions`
- ุชุญูู ูู ูุฌูุฏ ุจูุงูุงุช ูููุณุชุฎุฏู

### 2. ูู ุงููุชุตูุญ:
- ุงูุชุญ `http://localhost:8081`
- ุงุถุบุท F12 ููุชุญ Console
- ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก 406

### 3. ุงูุฑุณุงุฆู ุงููุชููุนุฉ:
```
โ [INFO] [EarlyConnection] Hugging Face connection established
โ [INFO] [EarlyConnection] Early connections initialized successfully
โ [Index] Hugging Face engine detected - WebSocket not needed
โ [SubscriptionContext] Checking subscription for user: [user_id]
```

## ๐ฏ ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

### 1. ูุญุต ุงูุณูุงุณุงุช ุงูุฃูููุฉ:
```sql
-- ูู Supabase SQL Editor
SELECT * FROM pg_policies WHERE tablename = 'user_subscriptions';
```

### 2. ุงุฎุชุจุงุฑ ุงููุตูู ุงููุจุงุดุฑ:
```sql
-- ูู Supabase SQL Editor
SELECT * FROM user_subscriptions WHERE user_id = '1881823d-1a1d-4946-9c7a-e296067dbca8';
```

### 3. ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุณูุงุณุงุช:
```sql
-- ูู Supabase SQL Editor
DROP POLICY IF EXISTS "Enable read access for all users" ON user_subscriptions;
CREATE POLICY "Enable read access for all users"
ON user_subscriptions FOR SELECT
USING (true);
```

## ๐ ุงููููุงุช ุงููุทููุจุฉ

### ูููุงุช ุงูุฅุตูุงุญ:
1. `fix_subscription_table_emergency.sql` - ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. `emergency-web-fix.bat` - ุฅุตูุงุญ ุชููุงุฆู
3. `FINAL_406_FIX_GUIDE.md` - ูุฐุง ุงูุฏููู

### ุงูุชุบููุฑุงุช ูู ุงูููุฏ:
1. `lib/supabase.ts` - ุชุญุณูู headers
2. `contexts/SubscriptionContext.tsx` - ุชุบููุฑ `.single()` ุฅูู `.maybeSingle()`

## โ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุงูุฅุตูุงุญ:
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก 406 ูู Console
- โ ุตูุญุฉ ุงูุชุณุฌูู ุชุธูุฑ ูู ุงูููุจ
- โ ุงูุงุชุตุงู ุจู Supabase ูุนูู ุจุดูู ุตุญูุญ
- โ ุฌููุน ุงูููุฒุงุช ุชุนูู ููุง ูู ูุชููุน

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฅุตูุงุญ ุดุงูู**: ูุบุทู ุฌููุน ุฌูุงูุจ ุงููุดููุฉ
2. **ุณูุงุณุงุช ุจุณูุทุฉ**: ุชุณูุญ ุจุงููุตูู ููุฌููุน ูุน ุงูุญูุงูุฉ
3. **ุจูุงูุงุช ุชุฌุฑูุจูุฉ**: ุชุถูู ุนูู ุงูุชุทุจูู ููุฑุงู
4. **headers ูุญุณูุฉ**: ุชุถูู ุชูุงูู ุงูุทูุจุงุช

## ๐ ุงูุฏุนู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:
1. ุชุญูู ูู ุณุฌูุงุช Supabase Dashboard > Logs
2. ุชุฃูุฏ ูู ุชุทุจูู SQL fix ุจุดูู ุตุญูุญ
3. ุชุญูู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู ููู `.env`

## โฑ๏ธ ุงูููุช ุงููุชููุน

- **ุชุทุจูู SQL fix**: 1-2 ุฏูููุฉ
- **ุชุดุบูู ุงูุฅุตูุงุญ ุงูุชููุงุฆู**: 2-3 ุฏูุงุฆู
- **ุงูุชุญูู ูู ุงูุฅุตูุงุญ**: 1 ุฏูููุฉ

## ๐ ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ!

ูุฐุง ุงูุฅุตูุงุญ ุณูุญู ูุดููุฉ ุฎุทุฃ 406 ููุงุฆูุงู ููุถูู ุนูู ุงูุชุทุจูู ุนูู ุงูููุจ. 