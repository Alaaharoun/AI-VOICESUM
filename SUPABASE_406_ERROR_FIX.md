# ๐ง ุฅุตูุงุญ ุฃุฎุทุงุก Supabase 406

## ๐จ ุงููุดููุฉ ุงูุฃุตููุฉ

**ุงููุดููุฉ:** ุฃุฎุทุงุก 406 ูู ุทูุจุงุช Supabase:

```
the server responded with a status of 406 ()
Request: https://knghoytnlpcjcyiiyjax.supabase.co/rest/v1/app_settings?select=value&key=eq.transcription_engine
```

**HTTP Status Code 406 (Not Acceptable):**
- ุงูุฎุงุฏู ูุง ูุณุชุทูุน ุฅูุชุงุฌ ุงุณุชุฌุงุจุฉ ุชุชุทุงุจู ูุน ูุงุฆูุฉ ุงูููู ุงูููุจููุฉ ุงููุญุฏุฏุฉ ูู headers ุงูุทูุจ
- ูุญุฏุซ ุนุงุฏุฉ ุนูุฏูุง ุชููู headers ุงูุทูุจ ุบูุฑ ูุชูุงููุฉ ูุน ูุง ูุชููุนู ุงูุฎุงุฏู

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ `lib/supabase.ts` โ

**ุฅุถุงูุฉ headers ููุงุณุจุฉ:**
```typescript
supabase = createClient(supabaseUrl, supabaseAnonKey, {
  auth: {
    autoRefreshToken: true,
    persistSession: true,
    detectSessionInUrl: false
  },
  global: {
    headers: {
      'Cache-Control': 'no-cache',
      'Pragma': 'no-cache',
      'Expires': '0'
    }
  }
});
```

### 2. ุฅุตูุงุญ `services/transcriptionEngineService.ts` โ

**ุชุบููุฑ ุงููุญุฑู ุงูุงูุชุฑุงุถู ุฅูู Hugging Face:**
```typescript
// ูุจู ุงูุฅุตูุงุญ
return 'azure'; // Default to Azure

// ุจุนุฏ ุงูุฅุตูุงุญ
return 'huggingface'; // Default to Hugging Face
```

**ุงูุณุจุจ:** Hugging Face ูุง ูุญุชุงุฌ WebSocketุ ููุง ูููู ูู ุฃุฎุทุงุก ุงูุงุชุตุงู

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### โ ุฅุตูุงุญ ุฃุฎุทุงุก 406:
- **Headers ุตุญูุญุฉ:** ุชุถูู ุชูุงูู ุงูุทูุจุงุช ูุน ุงูุฎุงุฏู
- **ูุญุฑู ุงูุชุฑุงุถู ูุณุชูุฑ:** Hugging Face ุจุฏูุงู ูู Azure
- **ุชูููู ุงูุฃุฎุทุงุก:** ุทูุจุงุช ุฃูุซุฑ ุงุณุชูุฑุงุฑุงู

### โ ุฑุณุงุฆู Console ุงููุชููุนุฉ:
```
Supabase client created successfully with proper headers
[AuthContext] Hugging Face engine detected - WebSocket not needed
[EarlyConnection] Current engine detected: huggingface
โ Hugging Face connection established (latency: 180ms)
```

### โ ุชุญุณูู ุงูุฃุฏุงุก:
- ูุง ุฃุฎุทุงุก 406
- ุงุณุชุฌุงุจุฉ ุฃุณุฑุน
- ุงุณุชูุฑุงุฑ ูู ุงูุงุชุตุงูุงุช

## ๐ฏ ุงูููุงุฆุฏ

### โ 1. ุฅุตูุงุญ ุฃุฎุทุงุก HTTP:
- **ูุง ุฃุฎุทุงุก 406:** ุทูุจุงุช ูุชูุงููุฉ ูุน ุงูุฎุงุฏู
- **Headers ุตุญูุญุฉ:** ุชุถูู ุงุณุชูุฑุงุฑ ุงูุทูุจุงุช
- **ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ:** ุชุญุณูู ุงูุฃุฏุงุก

### โ 2. ุชุญุณูู ุงูุงุณุชูุฑุงุฑ:
- **ูุญุฑู ุงูุชุฑุงุถู ูุณุชูุฑ:** Hugging Face
- **ุชูููู ุงูุชุนููุฏ:** ูุง WebSocket ูุทููุจ
- **ุงุณุชูุฑุงุฑ ุงูุชุทุจูู:** ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู

### โ 3. ุชุญุณูู ุงูุฃุฏุงุก:
- **ุทูุจุงุช ุฃุณุฑุน:** headers ูุญุณูุฉ
- **ุชูููู ุงูุฃุฎุทุงุก:** ุงุณุชูุฑุงุฑ ูู ุงูุงุชุตุงูุงุช
- **ุชุฌุฑุจุฉ ุฃูุถู:** ุงูุชูุงู ุณูุณ

## ๐ ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ

### 1. ุชุดุบูู ุงูุชุทุจูู:
```bash
npx expo start --clear
```

### 2. ูุฑุงูุจุฉ Console:
- ูุฌุจ ุฃู ุชุฑู: "Supabase client created successfully with proper headers"
- ูุฌุจ ุฃู ุชุฑู: "Hugging Face engine detected"
- ูุง ูุฌุจ ุฃู ุชุฑู ุฃุฎุทุงุก 406

### 3. ูุฑุงูุจุฉ Network:
- ุทูุจุงุช Supabase ุชุญุชูู ุนูู headers ุตุญูุญุฉ
- ูุง ุฃุฎุทุงุก 406 ูู Network tab
- ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ ูู ุงูุฎุงุฏู

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. ุงุฎุชุจุงุฑ ุดุงูู:
- ุงุฎุชุจุงุฑ ูู ุงูููุจ
- ุงุฎุชุจุงุฑ ูู React Native
- ุงุฎุชุจุงุฑ ูู Android/iOS

### 2. ูุฑุงูุจุฉ ุงูุฃุฏุงุก:
- ููุงุณ ุณุฑุนุฉ ุงูุทูุจุงุช
- ูุฑุงูุจุฉ ุงุณุชูุฑุงุฑ ุงูุงุชุตุงูุงุช
- ุชุญุณูู ุงูุฃุฏุงุก

## ๐ ููุงุญุธุงุช ูููุฉ

1. **Headers ูููุฉ:** ุชุถูู ุงุณุชูุฑุงุฑ ุงูุทูุจุงุช
2. **ูุญุฑู ุงูุชุฑุงุถู:** Hugging Face ุฃูุซุฑ ุงุณุชูุฑุงุฑุงู
3. **ุงูุฃุฏุงุก:** ุชุญุณูู ุณุฑุนุฉ ุงูุงุณุชุฌุงุจุฉ
4. **ุงูุงุณุชูุฑุงุฑ:** ุชูููู ุงูุฃุฎุทุงุก

## ๐ง ุชูุงุตูู ุชูููุฉ

### ุฃุฎุทุงุก 406:
- **ุงูุณุจุจ:** headers ุบูุฑ ูุชูุงููุฉ
- **ุงูุญู:** ุฅุถุงูุฉ headers ููุงุณุจุฉ
- **ุงููุชูุฌุฉ:** ุทูุจุงุช ูุณุชูุฑุฉ

### ูุญุฑู ุงูุชุฑุงุถู:
- **ูุจู:** Azure (ูุญุชุงุฌ WebSocket)
- **ุจุนุฏ:** Hugging Face (HTTP API ููุท)
- **ุงููุชูุฌุฉ:** ุชูููู ุงูุชุนููุฏ ูุงูุฃุฎุทุงุก

---

**โ ุงูุฅุตูุงุญ ููุชูู - ูุฌุจ ุฃู ุชุนูู ุทูุจุงุช Supabase ุงูุขู ุจุฏูู ุฃุฎุทุงุก 406** 