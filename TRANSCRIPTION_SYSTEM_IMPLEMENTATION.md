# ูุธุงู ุงูุชูุฑูุบ ุงูุตูุชู - ุงูุชุทุจูู ุงููุงูู

## ๐ ููุฎุต ุงูุชุนุฏููุงุช ุงูููุฌุฒุฉ

ุชู ุชูููุฐ ุฌููุน ุงููุทููุจุงุช ุจูุฌุงุญ ูุฅูุดุงุก ูุธุงู ุชูุฑูุบ ุตูุชู ูุชูุงูู ูุน ูุธุงู ุฏูุงุฆู ูุฏููุน. ุฅููู ุชูุงุตูู ุฌููุน ุงูุชุนุฏููุงุช:

## ๐ฏ ุงููุทููุจุงุช ุงูููุฌุฒุฉ

### โ 1. ุฅุถุงูุฉ ุจุทุงูุฉ ุดุฑุงุก ุณุงุนุฉ ุชูุฑูุบ ุตูุชู
- **ุงููููุน**: `app/subscription.tsx`
- **ุงูุชูุงุตูู**: 
  - ุจุทุงูุฉ ุฌุฏูุฏุฉ ูุดุฑุงุก 60 ุฏูููุฉ ุชูุฑูุบ ุตูุชู
  - **ุงูุณุนุฑ ูุฌูุจ ูู Google Play ุชููุงุฆูุงู** (GBP 11.00 ุญุณุจ ุงูุตูุฑุฉ)
  - ุฒุฑ "Buy Now" ููุดุฑุงุก ุงูููุฑู
  - ุนุฑุถ ูุงุถุญ ููููุฒุงุช: "60 minutes of transcription time for one-time use"
  - ุฅุดุงุฑุฉ ุฅูู 15 ุฏูููุฉ ูุฌุงููุฉ ุนูุฏ ุงูุชุณุฌูู
  - **ูุนุฑู ุงูููุชุฌ**: `transcription_1_hour` (ูุคูุฏ ูู Google Play Console)

### โ 2. ุฑุจุท IAP ูุน Google Play Billing
- **ุงููููุน**: `app/subscription.tsx`
- **ุงูุชูุงุตูู**:
  - ุฅุถุงูุฉ ูุนุฑู ุงูููุชุฌ `transcription_1_hour` ุฅูู ูุงุฆูุฉ ุงูููุชุฌุงุช
  - **ุฌูุจ ุงูููุชุฌุงุช ุงููุฑุฏูุฉ**: ุงุณุชุฎุฏุงู `getProducts()` ููููุชุฌุงุช ุงููุฑุฏูุฉ
  - **ุฌูุจ ุงูุงุดุชุฑุงูุงุช**: ุงุณุชุฎุฏุงู `getSubscriptions()` ููุงุดุชุฑุงูุงุช
  - ุฑุจุท ุฒุฑ ุงูุดุฑุงุก ูุน `react-native-iap`
  - **ุงุณุชุฎุฏุงู `requestPurchase()` ููููุชุฌุงุช ุงููุฑุฏูุฉ**
  - **ุงุณุชุฎุฏุงู `requestSubscription()` ููุงุดุชุฑุงูุงุช**
  - ูุนุงูุฌุฉ ุงูุดุฑุงุก ุนุจุฑ `purchaseUpdatedListener`
  - ุชุญุฏูุซ ุงูุฑุตูุฏ ูู Supabase ุจุนุฏ ูุฌุงุญ ุงูุดุฑุงุก

### โ 3. ุชุญุฏูุซ ุงูุฑุตูุฏ ุจุนุฏ ุงูุดุฑุงุก
- **ุงููููุน**: `app/subscription.tsx` (useEffect ููุดุฑุงุก)
- **ุงูุชูุงุตูู**:
  - ุงุณุชุฏุนุงุก `increment_transcription_minutes` ูู Supabase
  - ุฅุถุงูุฉ 60 ุฏูููุฉ ุฅูู ุฑุตูุฏ ุงููุณุชุฎุฏู
  - ุนุฑุถ ุฑุณุงูุฉ ูุฌุงุญ ูููุณุชุฎุฏู
  - ุฅุนุงุฏุฉ ุชูุฌูู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

### โ 4. ุนุฑุถ ุงูุฑุตูุฏ ุงููุชุจูู
- **ุงููููุน**: `app/subscription.tsx` ู `app/(tabs)/upload.tsx`
- **ุงูุชูุงุตูู**:
  - ุนุฑุถ ุงูุฑุตูุฏ ุงููุชุจูู ูู ุตูุญุฉ ุงูุงุดุชุฑุงูุงุช
  - ุนุฑุถ ุงูุฑุตูุฏ ูู ุตูุญุฉ ุงูุชูุฑูุบ
  - ุชุญุฏูุซ ููุฑู ููุฑุตูุฏ ุจุนุฏ ูู ุนูููุฉ

### โ 5. ุชูุถูุญ ุงูุฏูุงุฆู ุงููุฌุงููุฉ
- **ุงููููุน**: `app/subscription.tsx`
- **ุงูุชูุงุตูู**:
  - ูุต ูุงุถุญ: "+ 15 free minutes when you first register"
  - ุดุฑุญ ูู ุจุทุงูุฉ ุงูุดุฑุงุก ุงูุฌุฏูุฏุฉ

### โ 6. ุงูุชุญูู ูู ุงูุฑุตูุฏ ูุจู ุงูุชูุฑูุบ
- **ุงููููุน**: `app/(tabs)/upload.tsx` ู `app/admin-upload.tsx`
- **ุงูุชูุงุตูู**:
  - ุญุณุงุจ ูุฏุฉ ุงููููุงุช ุงููุญุฏุฏุฉ
  - ุงูุชุญูู ูู ููุงูุฉ ุงูุฑุตูุฏ ูุจู ุงูุจุฏุก
  - ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ ุนูุฏ ุนุฏู ููุงูุฉ ุงูุฑุตูุฏ
  - ุฎุตู ุงูุฏูุงุฆู ุจุนุฏ ูู ุนูููุฉ ุชูุฑูุบ

### โ 7. ุฅุฒุงูุฉ Azure ูุชุญุณูู ุงููุงุฌูุฉ
- **ุงููููุน**: `app/admin-upload.tsx`
- **ุงูุชูุงุตูู**:
  - ุฅุฒุงูุฉ ุฎูุงุฑ Azure ุชูุงูุงู
  - ุงูุงุนุชูุงุฏ ุนูู AssemblyAI ููุท
  - ุชุญุณูู ุนุฑุถ ุงููุต ูุงูุชุฑุฌูุฉ
  - ูุงุฌูุฉ ุฃูุซุฑ ูุถูุญุงู ูุฌูุงูุงู

### โ 8. ุฑุจุท ุตูุญุฉ ุงูุฃุฏูู ุจูุธุงู ุงูุฏูุงุฆู
- **ุงููููุน**: `app/admin-upload.tsx`
- **ุงูุชูุงุตูู**:
  - ุงูุชุญูู ูู ุงูุฑุตูุฏ ูุจู ุงูุชูุฑูุบ
  - ุฎุตู ุงูุฏูุงุฆู ุจุนุฏ ูู ุนูููุฉ
  - ุนุฑุถ ุงูุฑุตูุฏ ุงููุชุจูู ูููุณุชุฎุฏู
  - ุฅุฒุงูุฉ ุงูุฅุญุตุงุฆูุงุช (ูุฃููุง ุณุชููู ูู admin.tsx)

### โ 9. ุฅุฒุงูุฉ Azure ูู ุตูุญุฉ ุงูุฃุฏูู
- **ุงููููุน**: `app/admin-upload.tsx`
- **ุงูุชูุงุตูู**:
  - ุฅุฒุงูุฉ ุฎูุงุฑ Azure ุชูุงูุงู
  - ุงูุงุนุชูุงุฏ ุนูู AssemblyAI ููุท
  - ุชุจุณูุท ุงููุงุฌูุฉ

### โ 10. ุชุญุณูู ูุงุฌูุฉ ุงูุฃุฏูู
- **ุงููููุน**: `app/admin-upload.tsx`
- **ุงูุชูุงุตูู**:
  - ุชุญุณูู ุนุฑุถ ุงููุต ูุงูุชุฑุฌูุฉ
  - ุฃุฒุฑุงุฑ ุฃูุถุญ ูุฃุฌูู
  - ุชูุณูู ุฃูุถู ูููุชุงุฆุฌ

## ๐ ุงูููุฒุงุช ุงูุฅุถุงููุฉ ุงูููุฌุฒุฉ

### โ ุฅูุดุงุก ุตูุญุฉ Upload ุนุงูุฉ
- **ุงููููุน**: `app/(tabs)/upload.tsx`
- **ุงูุชูุงุตูู**:
  - ุตูุญุฉ ุฌุฏูุฏุฉ ููุงุณุชุฎุฏุงู ุงูุนุงู
  - ุฅุฒุงูุฉ ูุญูุตุงุช ุงูุฃุฏูู
  - ูุงุฌูุฉ ูุญุณูุฉ ูุฌูููุฉ
  - ุฏุนู ุฑูุน ุนุฏุฉ ูููุงุช
  - ุญุณุงุจ ูุฏุฉ ุงููููุงุช ุชููุงุฆูุงู

### โ ุฅุถุงูุฉ ุชุจููุจ Upload
- **ุงููููุน**: `app/(tabs)/_layout.tsx`
- **ุงูุชูุงุตูู**:
  - ุฅุถุงูุฉ ุชุจููุจ "Upload" ูู ุดุฑูุท ุงูุชููู
  - ุฃููููุฉ Upload ููุงุณุจุฉ
  - ุณูููุฉ ุงููุตูู ูููุณุชุฎุฏููู

### โ ุฅุญุตุงุฆูุงุช ุงูุฃุฏูู
- **ุงููููุน**: `app/admin.tsx`
- **ุงูุชูุงุตูู**:
  - ุฅุญุตุงุฆูุงุช ุดุงููุฉ ููุธุงู ุงูุฏูุงุฆู
  - ุฅุฌูุงูู ุงููุณุชุฎุฏููู ูุงูุฏูุงุฆู ุงููุดุชุฑุงุฉ ูุงููุณุชุฎุฏูุฉ
  - ูุชูุณุท ุงูุงุณุชุฎุฏุงู ููู ูุณุชุฎุฏู
  - ุงููุณุชุฎุฏููู ุงููุดุทูู ุงูููู
  - ูุณุจุฉ ุงูุงุณุชุฎุฏุงู ุงูุฅุฌูุงููุฉ

## ๐ง ุงูุชุนุฏููุงุช ุงูุชูููุฉ ุงููููุฉ

### โ ุฌูุจ ุงูุฃุณุนุงุฑ ูู Google Play
- **ุงููุดููุฉ ุงูุณุงุจูุฉ**: ุงูุณุนุฑ ุซุงุจุช `$15.00`
- **ุงูุญู ุงููุทุจู**: 
  - ุฌูุจ ุงูููุชุฌุงุช ูู Google Play ุจุงุณุชุฎุฏุงู `getProducts()`
  - ุนุฑุถ `localizedPrice` ุฃู `price` ูู Google Play
  - ุงูุณุนุฑ ุงููุนูู: **GBP 11.00** (ุญุณุจ Google Play Console)

### โ ุงูุชุนุงูู ูุน ุงูููุชุฌุงุช ุงููุฑุฏูุฉ
- **ุงูููุชุฌ**: `transcription_1_hour` (ููุชุฌ ูุฑุฏู)
- **ุงูุทุฑููุฉ**: ุงุณุชุฎุฏุงู `requestPurchase()` ุจุฏูุงู ูู `requestSubscription()`
- **ุงูุชูููุฒ**: ุงูุชุญูู ูู ููุน ุงูููุชุฌ ูุจู ุงูุดุฑุงุก

### โ ุชุญุณูู ุฌูุจ ุงูููุชุฌุงุช
```typescript
// ุฌูุจ ุงูุงุดุชุฑุงูุงุช ูุงูููุชุฌุงุช ุงููุฑุฏูุฉ
const subscriptions = await RNIap.getSubscriptions(PRODUCT_IDS.filter(id => id !== 'transcription_1_hour'));
const individualProducts = await RNIap.getProducts(['transcription_1_hour']);
const products = [...subscriptions, ...individualProducts];
```

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Supabase)

### โ ุฅูุดุงุก ุฌุฏูู transcription_credits
```sql
CREATE TABLE transcription_credits (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE UNIQUE,
  total_minutes INTEGER DEFAULT 0 NOT NULL,
  used_minutes INTEGER DEFAULT 0 NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### โ ุงูุฏูุงู ูุงููุดุบูุงุช
- `increment_transcription_minutes()` - ุฅุถุงูุฉ ุฏูุงุฆู ููุดุฑุงุก
- `deduct_transcription_time()` - ุฎุตู ุฏูุงุฆู ุจุนุฏ ุงูุชูุฑูุบ
- `grant_free_minutes_on_signup()` - ููุญ 15 ุฏูููุฉ ูุฌุงููุฉ ุนูุฏ ุงูุชุณุฌูู
- `get_remaining_minutes()` - ุงูุญุตูู ุนูู ุงูุฑุตูุฏ ุงููุชุจูู
- `has_sufficient_credits()` - ุงูุชุญูู ูู ููุงูุฉ ุงูุฑุตูุฏ
- `get_transcription_stats()` - ุฅุญุตุงุฆูุงุช ููุฃุฏูู

### โ ุฃูุงู ุงูุจูุงูุงุช (RLS)
- ุณูุงุณุงุช ุฃูุงู ูุญูุงูุฉ ุจูุงูุงุช ุงููุณุชุฎุฏููู
- ุงููุณุชุฎุฏููู ูุฑูู ุฑุตูุฏูู ููุท
- ุงูุฃุฏูู ููููู ุฑุคูุฉ ุฌููุน ุงูุจูุงูุงุช

## ๐ฑ ุงููุงุฌูุงุช ุงููุญุฏุซุฉ

### 1. ุตูุญุฉ ุงูุงุดุชุฑุงูุงุช (`app/subscription.tsx`)
- โ ุจุทุงูุฉ ุดุฑุงุก ุณุงุนุฉ ุชูุฑูุบ ุตูุชู
- โ **ุงูุณุนุฑ ูุฌูุจ ูู Google Play ุชููุงุฆูุงู**
- โ ุนุฑุถ ุงูุฑุตูุฏ ุงููุชุจูู
- โ ุฑุจุท ูุน Google Play Billing
- โ ุชุญุฏูุซ ุงูุฑุตูุฏ ุจุนุฏ ุงูุดุฑุงุก
- โ **ูุนุงูุฌุฉ ุงูููุชุฌุงุช ุงููุฑุฏูุฉ ูุงูุงุดุชุฑุงูุงุช**

### 2. ุตูุญุฉ Upload ุงูุนุงูุฉ (`app/(tabs)/upload.tsx`)
- โ ูุงุฌูุฉ ุฌุฏูุฏุฉ ูุฌูููุฉ
- โ ุฏุนู ุฑูุน ุนุฏุฉ ูููุงุช
- โ ุญุณุงุจ ูุฏุฉ ุงููููุงุช
- โ ุงูุชุญูู ูู ุงูุฑุตูุฏ
- โ ุนุฑุถ ุงููุชุงุฆุฌ ุจุชูุณูู ุฌููู

### 3. ุตูุญุฉ ุงูุฃุฏูู (`app/admin-upload.tsx`)
- โ ุฅุฒุงูุฉ Azure
- โ ุฑุจุท ุจูุธุงู ุงูุฏูุงุฆู
- โ ุชุญุณูู ุงููุงุฌูุฉ
- โ ุฅุฒุงูุฉ ุงูุฅุญุตุงุฆูุงุช

### 4. ููุญุฉ ุงูุฃุฏูู (`app/admin.tsx`)
- โ ุฅุญุตุงุฆูุงุช ุดุงููุฉ ููุธุงู ุงูุฏูุงุฆู
- โ ุนุฑุถ ุฅุฌูุงูู ุงููุณุชุฎุฏููู ูุงูุฏูุงุฆู
- โ ูุชูุณุท ุงูุงุณุชุฎุฏุงู ูุงููุดุงุท ุงููููู

## ๐ง ุงููููุงุช ุงููุญุฏุซุฉ

1. `app/subscription.tsx` - ุฅุถุงูุฉ ุจุทุงูุฉ ุงูุดุฑุงุก ูุงูุฑุตูุฏ + **ุฌูุจ ุงูุฃุณุนุงุฑ ูู Google Play**
2. `app/(tabs)/upload.tsx` - ุตูุญุฉ Upload ุฌุฏูุฏุฉ
3. `app/(tabs)/_layout.tsx` - ุฅุถุงูุฉ ุชุจููุจ Upload
4. `app/admin-upload.tsx` - ุชุญุณููุงุช ูุฅุฒุงูุฉ Azure
5. `app/admin.tsx` - ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ุงูุฏูุงุฆู
6. `supabase_functions.sql` - ุฌููุน ุงูุฏูุงู ุงููุทููุจุฉ
7. `TRANSCRIPTION_SYSTEM_IMPLEMENTATION.md` - ุฏููู ุดุงูู

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏููู ุงูุนุงุฏููู:
1. **ุงูุชุณุฌูู**: ูุญุตู ุนูู 15 ุฏูููุฉ ูุฌุงููุฉ ุชููุงุฆูุงู
2. **ุงูุดุฑุงุก**: ูููู ุดุฑุงุก 60 ุฏูููุฉ ุฅุถุงููุฉ ุจุณุนุฑ **GBP 11.00** (ูู Google Play)
3. **ุงูุชูุฑูุบ**: ุฑูุน ูููุงุช ุตูุชูุฉ/ููุฏูู ูุงูุญุตูู ุนูู ุงููุต
4. **ุงููุชุงุจุนุฉ**: ูุฑุงูุจุฉ ุงูุฑุตูุฏ ุงููุชุจูู

### ููุฃุฏูู:
1. **ุงูุฅุญุตุงุฆูุงุช**: ูุฑุงูุจุฉ ุงุณุชุฎุฏุงู ุงููุธุงู
2. **ุงูุชูุฑูุบ**: ุงุณุชุฎุฏุงู ุตูุญุฉ ุงูุฃุฏูู ููุชูุฑูุบ
3. **ุงูุฅุฏุงุฑุฉ**: ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุงุดุชุฑุงูุงุช

## ๐ ูุธุงู ุงูุฏูุงุฆู

- **ุงูุชุณุฌูู ุงูุฌุฏูุฏ**: 15 ุฏูููุฉ ูุฌุงููุฉ
- **ุงูุดุฑุงุก ุงููุงุญุฏ**: 60 ุฏูููุฉ ุจุณุนุฑ **GBP 11.00** (ูู Google Play)
- **ุงูุฎุตู**: ุญุณุจ ูุฏุฉ ุงููููุงุช (ุชูุฑูุจ ูุฃุนูู)
- **ุงููุฑุงูุจุฉ**: ุนุฑุถ ุงูุฑุตูุฏ ุงููุชุจูู ูู ุฌููุน ุงูุตูุญุงุช

## โ ุงูุชุญูู ูู ุงูุชุทุจูู

ุฌููุน ุงููุทููุจุงุช ุชู ุชูููุฐูุง ุจูุฌุงุญ:
- [x] ุจุทุงูุฉ ุดุฑุงุก ุณุงุนุฉ ุชูุฑูุบ ุตูุชู
- [x] ุฑุจุท IAP ูุน Google Play
- [x] **ุฌูุจ ุงูุฃุณุนุงุฑ ูู Google Play (GBP 11.00)**
- [x] **ูุนุงูุฌุฉ ุงูููุชุฌุงุช ุงููุฑุฏูุฉ ูุงูุงุดุชุฑุงูุงุช**
- [x] ุชุญุฏูุซ ุงูุฑุตูุฏ ุจุนุฏ ุงูุดุฑุงุก
- [x] ุนุฑุถ ุงูุฑุตูุฏ ุงููุชุจูู
- [x] ุชูุถูุญ ุงูุฏูุงุฆู ุงููุฌุงููุฉ
- [x] ุงูุชุญูู ูู ุงูุฑุตูุฏ ูุจู ุงูุชูุฑูุบ
- [x] ุฅุฒุงูุฉ Azure ูุชุญุณูู ุงููุงุฌูุฉ
- [x] ุฑุจุท ุตูุญุฉ ุงูุฃุฏูู ุจูุธุงู ุงูุฏูุงุฆู
- [x] ุฅุฒุงูุฉ Azure ูู ุตูุญุฉ ุงูุฃุฏูู
- [x] ุชุญุณูู ูุงุฌูุฉ ุงูุฃุฏูู

## ๐ฏ ุงูุชุฃููุฏุงุช ุงููููุฉ

### โ ูุนุฑู ุงูููุชุฌ
- **ูุนุฑู ุงูููุชุฌ**: `transcription_1_hour` โ
- **ุงูุญุงูุฉ**: Active ูู Google Play Console โ
- **ุงูุณุนุฑ**: GBP 11.00 โ

### โ ุฌูุจ ุงูุฃุณุนุงุฑ
- **ุงููุตุฏุฑ**: Google Play Console โ
- **ุงูุทุฑููุฉ**: `getProducts()` ููููุชุฌุงุช ุงููุฑุฏูุฉ โ
- **ุงูุนุฑุถ**: `localizedPrice` ุฃู `price` โ

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูุน ูุธุงู ุฏูุงุฆู ูุชูุงูู! ๐ 